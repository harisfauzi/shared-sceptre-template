---
template:
  type: file
  path: guardduty/publishing-destination.yaml.j2

sceptre_user_data:
  project_code: "{{stack_group_config.project_code}}"
  source_repo_url: "https://github.com/example/guardduty-config"
  description: "GuardDuty Publishing Destinations for Security Logs"
  publishing_destinations:
    # S3 bucket destination with KMS encryption
    - name: SecurityLogsS3Destination
      destination_type: S3
      detector_id: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p"
      destination_arn: "arn:aws:s3:::security-logs-bucket/guardduty/"
      kms_key_arn: "arn:aws:kms:us-east-1:123456789012:key/abcd1234-5678-90ef-ghij-klmnopqrstuv"
      deletion_policy: Retain
      update_replace_policy: Retain
      tags:
        Environment: "Production"
        DataClassification: "Security"

    # Minimal configuration with just required fields
    - name: DefaultLogsS3Destination
      destination_type: S3
      detector_id: "b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q"
      destination_arn: "arn:aws:s3:::default-logs-bucket/guardduty/"
      # Using default deletion and update replace policies

    # Another destination with different configuration
    - name: ArchiveLogsS3Destination
      destination_type: S3
      detector_id: "c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r"
      destination_arn: "arn:aws:s3:::archive-logs-bucket/guardduty/"
      kms_key_arn: "arn:aws:kms:us-east-1:123456789012:key/efgh5678-9012-34ij-klmn-opqrstuvwxyz"
      tags:
        Environment: "Archive"
        Retention: "10years"

