{%- macro prep(source) %}
Type: {{ source.type }}
{%- if source.auth is defined %}
Auth:
  Type: {{ source.auth.type }}
{%- if source.auth.resource is defined %}
  Resource: {{ source.auth.resource }}
{%- endif %}
{%- endif %}
{%- if source.build_spec is defined %}
BuildSpec: {{ source.build_spec }}
{%- endif %}
{%- if source.build_status_config is defined %}
BuildStatusConfig:
{%- if source.build_status_config.context is defined %}
  Context: {{ source.build_status_config.context }}
{%- endif %}
{%- if source.build_status_config.target_url is defined %}
  TargetUrl: {{ source.build_status_config.target_url }}
{%- endif %}
{%- endif %}
{%- if source.git_clone_depth is defined %}
GitCloneDepth: {{ source.git_clone_depth }}
{%- endif %}
{%- if source.git_submodules_config is defined %}
GitSubmodulesConfig:
  FetchSubmodules: {{ source.git_submodules_config.fetch_submodules }}
{%- endif %}
{%- if source.insecure_ssl is defined %}
InsecureSsl: {{ source.insecure_ssl }}
{%- endif %}
{%- if source.location is defined %}
Location: {{ source.location }}
{%- endif %}
{%- if source.report_build_status is defined %}
ReportBuildStatus: {{ source.report_build_status }}
{%- endif %}
{%- if source.source_identifier is defined %}
SourceIdentifier: {{ source.source_identifier }}
{%- endif %}
{%- endmacro %}